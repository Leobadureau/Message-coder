<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message crypter</title>
</head>
<body>
    
    <h1>Crypter un message</h1>

        <p>Mot de passe :</p>
        <form id="formMDP">
            <input type="text"  id="MDPInput">
            <button type="submit">entrer</button>
        </form>
        <p>Message</p>
        <form id="formMSG">
            <input type="text"  id="MSGInput">
            <button type="submit">entrer</button>
        </form>

        <p>Message à décrypter</p>
        <form id="formMC">
            <input type="text"  id="MCInput">
            <button type="submit">entrer</button>
        </form>

        <script>
            let k = 0;
            document.getElementById("formMDP").addEventListener("submit", function (e) {
                e.preventDefault();
                const mdp = document.getElementById("MDPInput").value;
                k = 0;
                for (let i = 0; i < mdp.length; i++) {
                    k += mdp.charCodeAt(i);
                }
            
                k = k % 26;
                alert("Clé k = " + k);
            });
            
           
            document.getElementById("formMSG").addEventListener("submit", function (e) {
                e.preventDefault();
            
                const msg = document.getElementById("MSGInput").value;
                let crypte = "";
            
                for (let i = 0; i < msg.length; i++) {
                    let lettre = msg.charCodeAt(i);
            
                    if (lettre >= 65 && lettre <= 90) {
                        lettre = ((lettre - 65 + k) % 26) + 65;
                    }
                 
                    else if (lettre >= 97 && lettre <= 122) {
                        lettre = ((lettre - 97 + k) % 26) + 97;
                    }
            
                    crypte += String.fromCharCode(lettre);
                }
            
                alert("Message chiffré : " + crypte);
            });

            document.getElementById("formMC").addEventListener("submit", function (e) {
                e.preventDefault();
            
                const mc = document.getElementById("MCInput").value;
                let VO = "";
            
                for (let i = 0; i < mc.length; i++) {
                    let lettre = mc.charCodeAt(i);
            
                    if (lettre >= 65 && lettre <= 90) {
                        lettre = ((lettre - 65 - k + 26) % 26) + 65;
                    }
                 
                    else if (lettre >= 97 && lettre <= 122) {
                        lettre = ((lettre - 97 - k + 26) % 26) + 97;
                    }
            
                    VO += String.fromCharCode(lettre);
                }
            
                alert("Message déchiffré : " + VO);

            });

            
            </script>
            
</body>
</html>
